(this["webpackJsonptest-fabric-react"]=this["webpackJsonptest-fabric-react"]||[]).push([[0],{88:function(t,e){},89:function(t,e){},90:function(t,e){},91:function(t,e,n){},98:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),o=n(56),c=n(8),r=n(143),s=n(139),l=n(141),d=n(144),u=n(14),f=n(54),b=(n(91),n(2)),v=!1,h=["Lorem ipsum dolor sit amet","Consectetur adipiscing elit","Sed do eiusmod tempor incididunt","Ut labore et dolore magna aliqua","Ut enim ad minim veniam","Quis nostrud exercitation ullamco laboris","Nisi ut aliquip ex ea commodo consequat","Duis aute irure dolor in reprehenderit","Voluptate velit esse cillum dolore eu fugiat nulla pariatur","Excepteur sint occaecat cupidatat non proident"];function g(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}function p(){var t=Object(f.b)(),e=t.editor,n=t.onReady,o=[],p=Object(i.useState)("#35363a"),j=Object(c.a)(p,2),m=j[0],O=j[1],x=Object(i.useState)("#35363a"),k=Object(c.a)(x,2),w=k[0],y=k[1],C=Object(i.useState)(!0),S=Object(c.a)(C,2),B=S[0],A=S[1],T=Object(i.useState)((function(){var t=localStorage.getItem("loSnapOn");return null===t||Boolean(t)})),_=Object(c.a)(T,2),R=_[0],D=_[1],E=Object(i.useState)((function(){var t=localStorage.getItem("loSnapSize");return null!==t?Number(t):10})),P=Object(c.a)(E,2),L=P[0],F=P[1],I=Object(i.useState)(1),z=Object(c.a)(I,2),G=z[0],M=z[1],U=Object(i.useState)({left:0,top:0,width:0,height:0}),Y=Object(c.a)(U,2),X=Y[0],q=Y[1];u.fabric.Object.prototype.transparentCorners=!1,u.fabric.Object.prototype.cornerColor="blue",u.fabric.Object.prototype.cornerSize=10,u.fabric.Object.prototype.hasRotatingPoint=!1,u.fabric.Object.prototype.rotatingPointOffset=5,u.fabric.Object.prototype.cornerStyle="circle",Object(i.useEffect)((function(){e&&u.fabric&&(e.canvas.__eventListeners={},e.canvas.__eventListeners["mouse:wheel"]||e.canvas.on("mouse:wheel",(function(t){var n=t.e.deltaY,i=e.canvas.getZoom();(i*=Math.pow(.999,n))>10&&(i=10),i<.01&&(i=.01),M(i),t.e.preventDefault(),t.e.stopPropagation()})),e.canvas.__eventListeners["mouse:down"]||e.canvas.on("mouse:down",(function(t){var e=t.e;!0===e.ctrlKey&&(this.isDragging=!0,this.selection=!1,this.lastPosX=e.clientX,this.lastPosY=e.clientY)})),e.canvas.__eventListeners["mouse:move"]||e.canvas.on("mouse:move",(function(t){if(this.isDragging){var e=t.e,n=this.viewportTransform;n[4]+=e.clientX-this.lastPosX,n[5]+=e.clientY-this.lastPosY,this.requestRenderAll(),this.lastPosX=e.clientX,this.lastPosY=e.clientY}})),e.canvas.__eventListeners["mouse:up"]||e.canvas.on("mouse:up",(function(t){if(this.setViewportTransform(this.viewportTransform),this.isDragging=!1,this.selection=!0,e.canvas.getActiveObject()){var n=e.canvas.getActiveObject();q({left:n.left.toFixed(1),top:n.top.toFixed(1),width:n.width.toFixed(1),height:n.height.toFixed(1)}),v=!0,O(n.fill),y(n.stroke),console.log("reading info")}})))}),[e]),Object(i.useEffect)((function(){e&&u.fabric&&R&&(e.canvas.__eventListeners["object:moving"]||e.canvas.on("object:moving",(function(t){var e=Math.round(t.target.left/L),n=Math.round(t.target.top/L);t.target.set({left:e*L,top:n*L}).setCoords()})),e.canvas.__eventListeners["object:scaling"]||e.canvas.on("object:scaling",(function(t){var e=Math.round(t.target.width*t.target.scaleX/L),n=Math.round(t.target.height*t.target.scaleY/L);t.target.set({scaleX:e*L/t.target.width,scaleY:n*L/t.target.height}).setCoords()})))}),[e]);Object(i.useEffect)((function(){if(e&&u.fabric){var t=document.getElementById("ciPaintBox").getBoundingClientRect();e.canvas.setWidth(t.width-10),e.canvas.setHeight(t.height-10),e&&u.fabric&&u.fabric.Image.fromURL("https://static6.depositphotos.com/1016929/586/i/950/depositphotos_5867515-stock-photo-large-radio-antenna.jpg",(function(t){e.canvas.setBackgroundImage(t,e.canvas.renderAll.bind(e.canvas),{originX:"center",originY:"center",top:e.canvas.height/2,left:e.canvas.width/2,backgroundImageStretch:"none"})})),e.canvas.renderAll()}}),[null===e||void 0===e?void 0:e.canvas.backgroundImage]),Object(i.useEffect)((function(){e&&u.fabric&&(v?v=!1:e.setFillColor(m))}),[m]),Object(i.useEffect)((function(){e&&u.fabric&&(v?v=!1:(e.canvas.freeDrawingBrush.color=w,e.setStrokeColor(w)))}),[w]),Object(i.useEffect)((function(){if(e&&u.fabric)return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)};function t(){var t=document.getElementById("ciPaintBox").getBoundingClientRect();void 0!==e&&(e.canvas.setWidth(t.width-10),e.canvas.setHeight(t.height-10))}}),[]),Object(i.useEffect)((function(){e&&u.fabric&&e.canvas.setZoom(G)}),[G]);var N=a.a.useRef();return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("h3",{children:"Irus Graphic Editor"}),Object(b.jsx)("div",{id:"ciPaintBox",style:{border:"3px ".concat(B?"solid":"dotted"," Gray")},children:Object(b.jsx)(f.a,{className:"ciPaintBox",onReady:n})}),Object(b.jsxs)("div",{id:"ciRightPane",children:[Object(b.jsx)(r.a,{variant:"contained",id:"ciBtnTool",onClick:function(){var t,n=[(t=e.canvas).width/8,t.height/8],i=Object(c.a)(n,2),a=i[0],o=i[1];console.log(a+", "+o);var r=new u.fabric.Circle({radius:200,left:a,top:o,fill:g(),stroke:g(),strokeWidth:2});e.canvas.add(r)},children:"Add circle"}),Object(b.jsx)(r.a,{variant:"contained",id:"ciBtnTool",onClick:function(){var t=new u.fabric.Rect({left:300,top:300,width:300,height:300,fill:g(),stroke:g(),strokeWidth:2});e.canvas.add(t)},disabled:!B,children:"Add Rect"}),Object(b.jsx)(r.a,{variant:"contained",id:"ciBtnTool",onClick:function(){e.addLine()},children:"Add Line"}),Object(b.jsx)("button",{id:"ciBtnTool",onClick:function(){var t=h[Math.floor(Math.random()*h.length)],n=new u.fabric.Textbox(t,{left:300,top:300,fontStyle:"normal",fontWeight:"normal",stroke:0,editable:!0,fill:g()});e.canvas.add(n)},disabled:!B,children:"Add Text"}),Object(b.jsx)("button",{id:"ciBtnTool",onClick:function(t){e.canvas.getActiveObject()&&"activeSelection"===e.canvas.getActiveObject().type&&(e.canvas.getActiveObject().toGroup(),e.canvas.requestRenderAll())},disabled:!B,children:"Group"}),Object(b.jsx)("button",{id:"ciBtnTool",onClick:function(t){e.canvas.getActiveObject()&&"group"===e.canvas.getActiveObject().type&&(e.canvas.getActiveObject().toActiveSelection(),e.canvas.requestRenderAll())},disabled:!B,children:"Ungroup"}),Object(b.jsx)("button",{id:"ciBtnTool",onClick:function(t){e.canvas.discardActiveObject();var n=new u.fabric.ActiveSelection(e.canvas.getObjects(),{canvas:e.canvas});e.canvas.setActiveObject(n),e.canvas.requestRenderAll()},disabled:!B,children:"Select All"}),Object(b.jsx)("button",{id:"ciBtnTool",onClick:function(t){e.canvas.discardActiveObject(),e.canvas.requestRenderAll()},disabled:!B,children:"Unselect All"}),Object(b.jsx)("button",{id:"ciBtnTool",onClick:function(){e.canvas.isDrawingMode=!e.canvas.isDrawingMode},disabled:!B,children:"Toggle draw"}),Object(b.jsx)("button",{id:"ciBtnTool",onClick:function(){e.canvas._objects.splice(0,e.canvas._objects.length),o.splice(0,o.length),e.canvas.discardActiveObject(),e.canvas.renderAll()},disabled:!B,children:"Clear"}),Object(b.jsx)("button",{id:"ciBtnTool",onClick:function(){e.canvas._objects.length>0&&o.push(e.canvas._objects.pop()),e.canvas.renderAll()},disabled:!B,children:"Undo"}),Object(b.jsx)("button",{id:"ciBtnTool",onClick:function(){o.length>0&&e.canvas.add(o.pop())},disabled:!B,children:"Redo"}),Object(b.jsx)("button",{id:"ciBtnTool",onClick:function(){12===e.canvas.freeDrawingBrush.width?e.canvas.freeDrawingBrush.width=5:e.canvas.freeDrawingBrush.width=12},disabled:!B,children:"ToggleSize"}),Object(b.jsx)("button",{id:"ciBtnTool",onClick:function(){e.canvas.remove(e.canvas.getActiveObject())},disabled:!B,children:"Delete"}),Object(b.jsx)("button",{id:"ciBtnTool",onClick:function(t){return A(!B)},children:"Crop"}),Object(b.jsx)("input",{id:"ciBtnTool",style:{marginLeft:"0px"},type:"color",disabled:!B,value:m,onChange:function(t){return O(t.target.value)}}),Object(b.jsx)("input",{id:"ciBtnTool",style:{marginLeft:"0px"},type:"color",disabled:!B,value:w,onChange:function(t){return y(t.target.value)}}),Object(b.jsxs)("button",{id:"ciBtnTool",onClick:function(){var t=e.canvas.toSVG();console.info(t)},disabled:!B,children:[" ","ToSVG"]}),Object(b.jsx)("button",{id:"ciBtnTool",onClick:function(){u.fabric.loadSVGFromString('<?xml version="1.0" encoding="UTF-8" standalone="no" ?>\n    <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="500" height="500" viewBox="0 0 500 500" xml:space="preserve">\n    <desc>Created with Fabric.js 5.3.0</desc>\n    <defs>\n    </defs>\n    <g transform="matrix(1 0 0 1 662.5 750)"  >\n      <image style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;"  xlink:href="https://thegraphicsfairy.com/wp-content/uploads/2019/02/Anatomical-Heart-Illustration-Black-GraphicsFairy.jpg" x="-662.5" y="-750" width="1325" height="1500"></image>\n    </g>\n    <g transform="matrix(1 0 0 1 120.5 120.5)"  >\n    <circle style="stroke: rgb(53,54,58); stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-opacity: 0; fill-rule: nonzero; opacity: 1;"  cx="0" cy="0" r="20" />\n    </g>\n    <g transform="matrix(1 0 0 1 245.5 200.5)"  >\n    <line style="stroke: rgb(53,54,58); stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;"  x1="-75" y1="-50" x2="75" y2="50" />\n    </g>\n    <g transform="matrix(1 0 0 1 141.4 220.03)" style=""  >\n        <text xml:space="preserve" font-family="Arial" font-size="16" font-style="normal" font-weight="normal" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(53,54,58); fill-rule: nonzero; opacity: 1; white-space: pre;" ><tspan x="-16.9" y="-5.46" >inset</tspan><tspan x="-16.9" y="15.51" >text</tspan></text>\n    </g>\n    <g transform="matrix(1 0 0 1 268.5 98.5)"  >\n    <rect style="stroke: rgb(53,54,58); stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-opacity: 0; fill-rule: nonzero; opacity: 1;"  x="-20" y="-20" rx="0" ry="0" width="40" height="40" />\n    </g>\n    </svg>',(function(t,n){e.canvas._objects.splice(0,e.canvas._objects.length),e.canvas.backgroundImage=t[0],t.filter((function(t,e){return 0!==e})).forEach((function(t){e.canvas.add(t)})),e.canvas.renderAll()}))},disabled:!B,children:"FromSVG"}),Object(b.jsx)(d.a,{checked:R,onChange:function(t){D(t.target.checked),console.log("snapOn:"+R),localStorage.setItem("loSnapOn",t.target.checked)},color:"primary"}),Object(b.jsx)("div",{children:Object(b.jsx)(s.a,{type:"number",label:"Snap Size",variant:"outlined",value:L,onChange:function(t){F(t.target.value),localStorage.setItem("loSnapSize",L)},InputProps:{inputProps:{min:1,max:100,step:1}}})}),Object(b.jsxs)("div",{style:{fontSize:"10px",padding:"5px"},children:[Object(b.jsxs)("div",{children:[X.left,", ",X.top]}),Object(b.jsxs)("div",{children:[X.width,", ",X.height]}),Object(b.jsx)("div",{children:X.color})]}),Object(b.jsx)(l.a,{style:{margin:"0px 10px"},value:G,min:.01,max:20,step:.1,onChange:function(t,e){e>10&&(e=10),e<.01&&(e=.01),M(e),t.preventDefault(),t.stopPropagation()}}),Object(b.jsxs)("p",{style:{fontSize:"12px"},onClick:function(){return M(1)},children:[" ",G.toFixed(1),"x"]}),Object(b.jsx)(r.a,{variant:"contained",color:"primary",id:"ciBtnTool",onClick:function(){return N.current.click()},children:"Upload File"}),Object(b.jsx)("input",{ref:N,type:"file",onChange:function(t){if(!(t.target.files.length<=0)){var n=t.target.files[0],i=new FileReader;i.onload=function(t){var n=t.target.result;e.canvas.loadFromJSON(n),e.canvas.renderAll()},i.readAsText(n),N.current.value=null}},style:{display:"none"}}),Object(b.jsx)(r.a,{id:"ciBtnTool",variant:"contained",color:"secondary",onClick:function(){var t=JSON.stringify(e.canvas.toJSON()),n=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(n),a=document.createElement("a");a.href=i,a.download="FabricCanvas.json",a.click()},children:"Save Canvas"})]})]})}var j=document.getElementById("root");Object(o.createRoot)(j).render(Object(b.jsx)(i.StrictMode,{children:Object(b.jsx)(p,{})}))}},[[98,1,2]]]);
//# sourceMappingURL=main.bbd6724b.chunk.js.map